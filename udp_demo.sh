#!/bin/bash

# UDP Server and Client Demo Script
# This script demonstrates how to use the UDP server and client programs

echo "=== UDP SERVER AND CLIENT DEMO ==="
echo ""

echo "ğŸ“‹ Available programs:"
echo "  ./udp_server  - Starts UDP server on port 9999"
echo "  ./udp_client  - Sends messages to UDP server"
echo "  ./udp_test    - Combined test of server and client"
echo ""

echo "ğŸš€ Usage Examples:"
echo ""

echo "1. Start UDP Server (in one terminal):"
echo "   ./udp_server"
echo ""

echo "2. Send messages from UDP Client (in another terminal):"
echo "   ./udp_client \"Hello Server!\""
echo "   ./udp_client \"Custom message\" 192.168.1.100"
echo "   ./udp_client                    # Interactive mode"
echo ""

echo "3. Run combined test:"
echo "   ./udp_test"
echo ""

echo "ğŸ”§ UDP Server Features:"
echo "  â€¢ Binds to port 9999"
echo "  â€¢ Accepts messages from any IP address"
echo "  â€¢ Echoes received messages back to clients"
echo "  â€¢ Shows client IP and port information"
echo "  â€¢ Graceful shutdown with Ctrl+C"
echo ""

echo "ğŸ”§ UDP Client Features:"
echo "  â€¢ Sends messages to specified server"
echo "  â€¢ Waits for server response (5 second timeout)"
echo "  â€¢ Command line or interactive input"
echo "  â€¢ Validates echo responses"
echo "  â€¢ Error handling for network issues"
echo ""

echo "ğŸ“Š UDP vs TCP Comparison:"
echo "â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”"
echo "â”‚ Feature      â”‚ UDP         â”‚ TCP         â”‚"
echo "â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤"
echo "â”‚ Connection   â”‚ Connectionless â”‚ Connection-oriented â”‚"
echo "â”‚ Reliability  â”‚ Unreliable  â”‚ Reliable    â”‚"
echo "â”‚ Speed        â”‚ Faster      â”‚ Slower      â”‚"
echo "â”‚ Overhead     â”‚ Low         â”‚ High        â”‚"
echo "â”‚ Header Size  â”‚ 8 bytes     â”‚ 20+ bytes   â”‚"
echo "â”‚ Ordering     â”‚ None        â”‚ Guaranteed  â”‚"
echo "â”‚ Use Cases    â”‚ Gaming, DNS â”‚ Web, Email  â”‚"
echo "â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜"
echo ""

echo "ğŸ’¡ When to use UDP:"
echo "  â€¢ Real-time applications (gaming, streaming)"
echo "  â€¢ Simple request/response (DNS queries)"
echo "  â€¢ Broadcasting/multicasting"
echo "  â€¢ Low latency requirements"
echo "  â€¢ IoT sensor data"
echo ""

echo "ğŸ’¡ When to use TCP:"
echo "  â€¢ Reliable data transfer required"
echo "  â€¢ File transfers"
echo "  â€¢ Web browsing (HTTP/HTTPS)"
echo "  â€¢ Email (SMTP, POP3, IMAP)"
echo "  â€¢ Database connections"
echo ""

echo "ğŸ” Implementation Details:"
echo ""
echo "UDP Server Implementation:"
echo "  1. socket(AF_INET, SOCK_DGRAM, 0)     # Create UDP socket"
echo "  2. bind() to port and address         # Bind to specific port"
echo "  3. recvfrom() in loop                 # Receive messages"
echo "  4. sendto() response                  # Send responses"
echo ""
echo "UDP Client Implementation:"
echo "  1. socket(AF_INET, SOCK_DGRAM, 0)     # Create UDP socket"
echo "  2. sendto() with server address       # Send to server"
echo "  3. recvfrom() for response            # Receive response"
echo "  4. close() socket                     # Clean up"
echo ""

echo "ğŸ¯ Key Learning Points:"
echo "  â€¢ UDP is connectionless - no handshake needed"
echo "  â€¢ Each message is independent"
echo "  â€¢ No delivery guarantee - messages may be lost"
echo "  â€¢ Lower latency than TCP"
echo "  â€¢ Application must handle reliability if needed"
echo "  â€¢ Perfect for real-time applications"
echo ""

echo "âœ… Demo script complete!"
echo "   Ready to run UDP programs!"
